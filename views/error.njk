{% extends "layout.njk" %}

{% block title %}{{ title or "Error" }} - Team 3 Job Application Frontend{% endblock %}

{% block content %}
    <h1>{{ title or "Oops! Something went wrong" }} {% if statusCode >= 500 %}üö®{% elif statusCode == 404 %}üîç{% else %}‚ö†Ô∏è{% endif %}</h1>
    
    <div class="info-card">
        <h3>Error Details</h3>
        <p><strong>Status:</strong> {{ statusCode }}</p>
        <p><strong>Message:</strong> {{ message }}</p>
        {% if path %}
        <p><strong>Path:</strong> {{ path }}</p>
        {% endif %}
        {% if requestId %}
        <p><strong>Request ID:</strong> <code>{{ requestId }}</code></p>
        {% endif %}
        <p><strong>Time:</strong> {{ timestamp }}</p>
    </div>

    {% if showDetails and error %}
    <div class="info-card">
        <details>
            <summary>Technical Details (Development Mode)</summary>
            {% if error.stack %}
            <pre style="background: #f5f5f5; padding: 10px; border-radius: 4px; overflow-x: auto; font-size: 0.85em;">{{ error.stack }}</pre>
            {% else %}
            <p><strong>Error Name:</strong> {{ error.name }}</p>
            <p><strong>Error Message:</strong> {{ error.message }}</p>
            {% endif %}
        </details>
    </div>
    {% endif %}

    <div class="info-card">
        <h3>What can you do?</h3>
        <ul>
            {% if statusCode == 404 %}
            <li>Check the URL for typos</li>
            <li><a href="/">‚Üê Go back to Home</a></li>
            {% elif statusCode >= 500 %}
            <li>Try refreshing the page</li>
            <li>Wait a moment and try again</li>
            <li><a href="/health">Check system health</a></li>
            <li>Contact support with Request ID: <code>{{ requestId }}</code></li>
            {% else %}
            <li>Check your request and try again</li>
            <li><a href="/">‚Üê Go back to Home</a></li>
            {% endif %}
            <li><a href="/health">Check system health</a></li>
        </ul>
    </div>
{% endblock %}