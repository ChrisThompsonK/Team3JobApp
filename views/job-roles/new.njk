{% extends "layout.njk" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-5xl">
  <!-- Page Header -->
  <div class="flex flex-col lg:flex-row justify-between items-center mb-8 gap-4">
    <h1 class="text-4xl md:text-5xl font-bold kainos-text-gradient">{{ title }}</h1>
    <a href="/jobs" class="btn-kainos-outline shadow-lg hover:shadow-xl inline-flex items-center gap-2">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
      </svg>
      <span>Back to Job Roles</span>
    </a>
  </div>

  <!-- Form Card with DaisyUI -->
  <div class="card bg-base-100 shadow-2xl">
    <div class="card-body">
      <h2 class="card-title text-2xl text-kainos-primary mb-2">Job Role Information</h2>
      <p class="text-base-content/70 mb-6">Fill in the details to create a new job role posting</p>
      
      <div class="divider"></div>
      
      <form id="newJobForm" action="/jobs/new" method="POST">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Job Name -->
          <div class="form-control">
            <label class="label" for="name">
              <span class="label-text font-semibold">Job Name *</span>
            </label>
            <input 
              type="text" 
              id="name"
              name="name" 
              placeholder="e.g., Software Engineer" 
              class="input input-bordered input-primary w-full" 
              required
            />
          </div>

          <!-- Location -->
          <div class="form-control">
            <label class="label" for="location">
              <span class="label-text font-semibold">Location *</span>
            </label>
            <select id="location" name="location" class="select select-bordered select-primary w-full" required>
              <option disabled selected>Select location</option>
              {% for location in locationOptions %}
              <option value="{{ location }}">{{ location }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Capability -->
          <div class="form-control">
            <label class="label" for="capabilityId">
              <span class="label-text font-semibold">Capability *</span>
            </label>
            <select id="capabilityId" name="capabilityId" class="select select-bordered select-primary w-full" required>
              <option disabled selected>Select capability</option>
              {% for capability in capabilities %}
              <option value="{{ capability.id }}">{{ capability.name }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Band -->
          <div class="form-control">
            <label class="label" for="bandId">
              <span class="label-text font-semibold">Band *</span>
            </label>
            <select id="bandId" name="bandId" class="select select-bordered select-primary w-full" required>
              <option disabled selected>Select band</option>
              {% for band in bands %}
              <option value="{{ band.id }}">{{ band.name }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Status -->
          <div class="form-control">
            <label class="label" for="statusId">
              <span class="label-text font-semibold">Status</span>
            </label>
            <select id="statusId" name="statusId" class="select select-bordered select-primary w-full">
              <option disabled selected>Select status</option>
              {% for status in statuses %}
              <option value="{{ status.id }}">{{ status.name }}</option>
              {% endfor %}
            </select>
          </div>

          <!-- Closing Date -->
          <div class="form-control">
            <label class="label" for="closingDate">
              <span class="label-text font-semibold">Closing Date *</span>
            </label>
            <input 
              type="date" 
              id="closingDate"
              name="closingDate" 
              class="input input-bordered input-primary w-full" 
              required
            />
          </div>

          <!-- Open Positions -->
          <div class="form-control">
            <label class="label" for="openPositions">
              <span class="label-text font-semibold">Open Positions</span>
            </label>
            <input 
              type="number" 
              id="openPositions"
              name="openPositions" 
              placeholder="e.g., 3" 
              class="input input-bordered input-primary w-full" 
              min="1"
              value="1"
            />
          </div>

          <!-- Job Description -->
          <div class="form-control md:col-span-2">
            <label class="label" for="description">
              <span class="label-text font-semibold">Job Description</span>
            </label>
            <textarea 
              id="description"
              name="description" 
              class="textarea textarea-bordered textarea-primary h-32 w-full" 
              placeholder="Provide a brief description of the role and its key objectives..."
            ></textarea>
            <label class="label">
              <span class="label-text-alt">Describe the role's purpose and main objectives</span>
            </label>
          </div>

          <!-- Job Responsibilities -->
          <div class="form-control md:col-span-2">
            <label class="label" for="responsibilities">
              <span class="label-text font-semibold">Key Responsibilities</span>
            </label>
            <textarea 
              id="responsibilities"
              name="responsibilities" 
              class="textarea textarea-bordered textarea-primary h-32 w-full" 
              placeholder="List the main responsibilities for this role (one per line)..."
            ></textarea>
            <label class="label">
              <span class="label-text-alt">Enter each responsibility on a new line</span>
            </label>
          </div>
        </div>

        <!-- Job Spec URL -->
        <div class="form-control mt-6">
          <label class="label" for="jobSpecUrl">
            <span class="label-text font-semibold">Job Specification URL</span>
          </label>
          <label class="input input-bordered input-primary flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-70" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
            </svg>
            <input 
              type="url" 
              id="jobSpecUrl"
              name="jobSpecUrl" 
              placeholder="https://example.com/job-spec.pdf" 
              class="grow"
            />
          </label>
          <label class="label">
            <span class="label-text-alt">Optional: Link to detailed job specification document</span>
          </label>
        </div>

        <!-- Form Actions inside card -->
        <div class="divider"></div>
        <div class="card-actions justify-end gap-3 mt-6">
          <a href="/jobs" class="btn-kainos-outline shadow-md hover:shadow-lg inline-flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
            <span>Cancel</span>
          </a>
          <button type="submit" class="btn-kainos shadow-lg hover:shadow-xl inline-flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span>Create Job Role</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}