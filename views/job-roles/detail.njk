{% extends "layout.njk" %}

{% block title %}{{ title }} - Team 3 Job Application Frontend{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8 max-w-4xl">
  <!-- Breadcrumb -->
  <div class="breadcrumbs text-sm mb-6">
    <ul>
      <li><a href="/" class="link link-primary">Home</a></li>
      <li><a href="/jobs" class="link link-primary">All Jobs</a></li>
      <li class="text-base-content">{{ jobRole.name }}</li>
    </ul>
  </div>

  <!-- Job Details Card -->
  <div class="card bg-base-100 shadow-xl">
    <div class="card-body">
      <!-- Header -->
      <div class="flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4 mb-6">
        <div>
          <h1 class="card-title text-3xl font-bold mb-2">{{ jobRole.name }}</h1>
          <div class="flex flex-wrap gap-2">
            <div class="badge badge-primary badge-lg">{{ jobRole.band }}</div>
            <div class="badge badge-secondary badge-lg">{{ jobRole.capability }}</div>
          </div>
        </div>
        <div class="text-right">
          <div class="text-sm text-base-content/70">Job ID</div>
          <div class="font-mono text-base-content">{{ jobRole.id }}</div>
        </div>
      </div>

      <!-- Key Information -->
      <div class="grid md:grid-cols-2 gap-6 mb-8">
        <!-- Location -->
        <div class="bg-base-200 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
            <div>
              <div class="font-semibold">Location</div>
              <div class="text-lg">{{ jobRole.location }}</div>
            </div>
          </div>
        </div>

        <!-- Capability -->
        <div class="bg-base-200 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2h8zM16 10h.01M12 10h.01M8 10h.01" />
            </svg>
            <div>
              <div class="font-semibold">Capability</div>
              <div class="text-lg">{{ jobRole.capability }}</div>
            </div>
          </div>
        </div>

        <!-- Band Level -->
        <div class="bg-base-200 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
            </svg>
            <div>
              <div class="font-semibold">Band Level</div>
              <div class="text-lg">{{ jobRole.band }}</div>
            </div>
          </div>
        </div>

        <!-- Closing Date -->
        <div class="bg-base-200 rounded-lg p-4">
          <div class="flex items-center gap-3">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3a4 4 0 118 0v4m-4 6h.01M7 21h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
            <div>
              <div class="font-semibold">Application Deadline</div>
              <div class="text-lg">{{ jobRole.closingDate.toLocaleDateString('en-GB', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
              }) }}</div>
              <div class="text-sm text-base-content/70">
                {% set daysUntilClose = ((jobRole.closingDate - new Date()) / (1000 * 60 * 60 * 24)) | round %}
                {% if daysUntilClose > 0 %}
                  {{ daysUntilClose }} day{{ 's' if daysUntilClose !== 1 }} remaining
                {% else %}
                  Application closed
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="card-actions justify-center gap-4">
        {% set daysUntilClose = ((jobRole.closingDate - new Date()) / (1000 * 60 * 60 * 24)) | round %}
        {% if daysUntilClose > 0 %}
          <button class="btn btn-primary btn-lg">Apply Now</button>
          <button class="btn btn-outline btn-lg">Save Job</button>
        {% else %}
          <button class="btn btn-disabled btn-lg">Application Closed</button>
        {% endif %}
      </div>

      <!-- Related Jobs -->
      <div class="mt-8">
        <h3 class="text-xl font-semibold mb-4">More Jobs in {{ jobRole.capability }}</h3>
        <div class="flex flex-wrap gap-2">
          <a href="/jobs/capability/{{ jobRole.capability }}" class="btn btn-outline btn-sm">
            View All {{ jobRole.capability }} Jobs
          </a>
          <a href="/jobs/location/{{ jobRole.location }}" class="btn btn-outline btn-sm">
            View All {{ jobRole.location }} Jobs
          </a>
          <a href="/jobs/band/{{ jobRole.band }}" class="btn btn-outline btn-sm">
            View All {{ jobRole.band }} Jobs
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <div class="mt-8 flex justify-between">
    <a href="/jobs" class="btn btn-ghost">‚Üê Back to All Jobs</a>
    <a href="/" class="btn btn-ghost">Home</a>
  </div>
</div>
{% endblock %}